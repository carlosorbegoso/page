import{V as p,S as u,P as f,W as w,B as l,a as c,b as g,A as M,c as y,g as b,L as x,d as P,k as v,M as E,i as R,l as d}from"./three.module.BNNMFZoX.js";class S{constructor(e){this.container=document.getElementById(e),this.container&&(this.scene=null,this.camera=null,this.renderer=null,this.particles=null,this.dataStreams=[],this.hologramRings=[],this.time=0,this.isVisible=!1,this.mouse=new p,this.isMobile=window.innerWidth<=768,this.isLowPower=window.innerWidth<=480,this.particleMultiplier=this.isLowPower?.3:this.isMobile?.5:1,this.init())}init(){this.scene=new u;const e=this.container.clientWidth/this.container.clientHeight;this.camera=new f(75,e,.1,1e3),this.camera.position.z=30,this.renderer=new w({antialias:!this.isMobile,alpha:!0,powerPreference:this.isMobile?"low-power":"default"}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,this.isMobile?1.5:2)),this.container.appendChild(this.renderer.domElement),this.createRisingParticles(),this.createDataStreams(),this.createHologramRings(),this.createGridFloor(),window.addEventListener("resize",()=>this.onResize()),window.addEventListener("mousemove",t=>this.onMouseMove(t)),this.setupIntersectionObserver(),this.animate()}createRisingParticles(){const e=Math.floor(200*this.particleMultiplier),t=new l,i=new Float32Array(e*3),n=new Float32Array(e),a=new Float32Array(e*3);for(let s=0;s<e;s++){i[s*3]=(Math.random()-.5)*60,i[s*3+1]=Math.random()*80-40,i[s*3+2]=(Math.random()-.5)*30,n[s]=.02+Math.random()*.05;const o=Math.random();a[s*3]=o*.5,a[s*3+1]=1-o*.3,a[s*3+2]=1}t.setAttribute("position",new c(i,3)),t.setAttribute("velocity",new c(n,1)),t.setAttribute("color",new c(a,3));const r=new g({size:1.5,vertexColors:!0,transparent:!0,opacity:.6,blending:M});this.particles=new y(t,r),this.scene.add(this.particles)}createDataStreams(){for(let t=0;t<8;t++){const i=new l,n=[],a=20,r=(t-8/2)*8;for(let h=0;h<a;h++)n.push(new b(r+(Math.random()-.5)*2,h*3-30,(Math.random()-.5)*10));i.setFromPoints(n);const s=new x({color:t%2===0?65535:16711935,transparent:!0,opacity:.2}),o=new P(i,s);o.userData={originalPoints:n.map(h=>h.clone()),phase:Math.random()*Math.PI*2,speed:.5+Math.random()*.5},this.scene.add(o),this.dataStreams.push(o)}}createHologramRings(){[-20,-5,10,25].forEach((t,i)=>{const n=new v(15+i*3,.1,8,64),a=new E({color:i%2===0?65535:16711935,transparent:!0,opacity:.15,wireframe:!0}),r=new R(n,a);r.position.y=t,r.rotation.x=Math.PI/2,r.userData={rotationSpeed:.002*(i%2===0?1:-1),pulsePhase:i*.5},this.scene.add(r),this.hologramRings.push(r)})}createGridFloor(){const e=new d(100,50,65535,65535);e.position.y=-35,e.material.transparent=!0,e.material.opacity=.1,this.scene.add(e);const t=new d(100,25,16711935,16711935);t.position.y=-35,t.material.transparent=!0,t.material.opacity=.05,this.scene.add(t)}setupIntersectionObserver(){const e=new IntersectionObserver(i=>{i.forEach(n=>{this.isVisible=n.isIntersecting})},{threshold:.1}),t=document.getElementById("experience");t&&e.observe(t)}onMouseMove(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-(e.clientY/window.innerHeight)*2+1}onResize(){if(!this.container)return;const e=this.container.clientWidth,t=this.container.clientHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}animate(){if(requestAnimationFrame(()=>this.animate()),!!this.isVisible){if(this.time+=.01,this.particles){const e=this.particles.geometry.attributes.position.array,t=this.particles.geometry.attributes.velocity.array;for(let i=0;i<e.length/3;i++)e[i*3+1]+=t[i],e[i*3+1]>40&&(e[i*3+1]=-40,e[i*3]=(Math.random()-.5)*60),e[i*3]+=Math.sin(this.time+i)*.01;this.particles.geometry.attributes.position.needsUpdate=!0}this.dataStreams.forEach((e,t)=>{const i=e.geometry.attributes.position.array,{originalPoints:n,phase:a,speed:r}=e.userData;for(let s=0;s<n.length;s++){const o=s*3;i[o]=n[s].x+Math.sin(this.time*r+s*.5+a)*2,i[o+2]=n[s].z+Math.cos(this.time*r+s*.3+a)*1}e.geometry.attributes.position.needsUpdate=!0,e.material.opacity=.1+Math.sin(this.time+t)*.1}),this.hologramRings.forEach((e,t)=>{e.rotation.z+=e.userData.rotationSpeed;const i=1+Math.sin(this.time*2+e.userData.pulsePhase)*.1;e.scale.setScalar(i),e.material.opacity=.1+Math.sin(this.time+t)*.08}),this.camera.position.x+=(this.mouse.x*3-this.camera.position.x)*.02,this.camera.position.y+=(this.mouse.y*2-this.camera.position.y)*.02,this.camera.lookAt(0,0,0),this.renderer.render(this.scene,this.camera)}}dispose(){this.renderer&&(this.renderer.dispose(),this.container.removeChild(this.renderer.domElement))}}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("experience-three-container")&&new S("experience-three-container")});export{S as ExperienceThreeEngine};
