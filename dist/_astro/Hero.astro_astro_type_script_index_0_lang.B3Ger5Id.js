const g="America/Lima";let d=null,h=0;const b=900*1e3,m={0:{description:"Clear sky",icon:"fa-sun",isDay:"fa-sun",isNight:"fa-moon"},1:{description:"Mainly clear",icon:"fa-sun",isDay:"fa-sun",isNight:"fa-moon"},2:{description:"Partly cloudy",icon:"fa-cloud-sun",isDay:"fa-cloud-sun",isNight:"fa-cloud-moon"},3:{description:"Overcast",icon:"fa-cloud",isDay:"fa-cloud",isNight:"fa-cloud"},45:{description:"Foggy",icon:"fa-smog",isDay:"fa-smog",isNight:"fa-smog"},48:{description:"Depositing rime fog",icon:"fa-smog",isDay:"fa-smog",isNight:"fa-smog"},51:{description:"Light drizzle",icon:"fa-cloud-rain",isDay:"fa-cloud-rain",isNight:"fa-cloud-rain"},53:{description:"Moderate drizzle",icon:"fa-cloud-rain",isDay:"fa-cloud-rain",isNight:"fa-cloud-rain"},55:{description:"Dense drizzle",icon:"fa-cloud-rain",isDay:"fa-cloud-rain",isNight:"fa-cloud-rain"},61:{description:"Slight rain",icon:"fa-cloud-rain",isDay:"fa-cloud-rain",isNight:"fa-cloud-rain"},63:{description:"Moderate rain",icon:"fa-cloud-showers-heavy",isDay:"fa-cloud-showers-heavy",isNight:"fa-cloud-showers-heavy"},65:{description:"Heavy rain",icon:"fa-cloud-showers-heavy",isDay:"fa-cloud-showers-heavy",isNight:"fa-cloud-showers-heavy"},71:{description:"Slight snow",icon:"fa-snowflake",isDay:"fa-snowflake",isNight:"fa-snowflake"},73:{description:"Moderate snow",icon:"fa-snowflake",isDay:"fa-snowflake",isNight:"fa-snowflake"},75:{description:"Heavy snow",icon:"fa-snowflake",isDay:"fa-snowflake",isNight:"fa-snowflake"},80:{description:"Slight showers",icon:"fa-cloud-rain",isDay:"fa-cloud-sun-rain",isNight:"fa-cloud-moon-rain"},81:{description:"Moderate showers",icon:"fa-cloud-showers-heavy",isDay:"fa-cloud-showers-heavy",isNight:"fa-cloud-showers-heavy"},82:{description:"Violent showers",icon:"fa-cloud-showers-heavy",isDay:"fa-cloud-showers-heavy",isNight:"fa-cloud-showers-heavy"},95:{description:"Thunderstorm",icon:"fa-bolt",isDay:"fa-bolt",isNight:"fa-bolt"},96:{description:"Thunderstorm with hail",icon:"fa-bolt",isDay:"fa-bolt",isNight:"fa-bolt"},99:{description:"Thunderstorm with heavy hail",icon:"fa-bolt",isDay:"fa-bolt",isNight:"fa-bolt"}};async function v(e=-12.0464,t=-77.0428,o=g){if(d&&Date.now()-h<b)return d;try{const a=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,is_day&timezone=${encodeURIComponent(o)}`,n=await fetch(a);if(n.ok){const i=(await n.json()).current,r=m[i.weather_code]||m[0];return d={temperature:Math.round(i.temperature_2m),feelsLike:Math.round(i.apparent_temperature),humidity:i.relative_humidity_2m,description:r.description,icon:i.is_day?r.isDay:r.isNight,isDay:i.is_day===1,timezone:o,timestamp:new Date().toISOString()},h=Date.now(),d}}catch{console.log("Open-Meteo API unavailable")}return null}function E(e=g){try{const t=new Date,o={timeZone:e,hour:"2-digit",minute:"2-digit",hour12:!0};return t.toLocaleTimeString("en-US",o)}catch{return null}}const y=["Backend Developer","Java Specialist","Microservices Expert","Cloud Architect"];let u=0,c=0,l=!1;const f=document.getElementById("typing-text");function p(){if(!f)return;const e=y[u];l?(f.textContent=e.substring(0,c-1),c--):(f.textContent=e.substring(0,c+1),c++);let t=l?50:100;!l&&c===e.length?(t=2e3,l=!0):l&&c===0&&(l=!1,u=(u+1)%y.length,t=500),setTimeout(p,t)}function I(){document.querySelectorAll(".stat-number[data-count]").forEach(t=>{const o=parseInt(t.getAttribute("data-count")||"0"),a=2e3,n=performance.now();function s(i){const r=Math.min((i-n)/a,1),N=1-Math.pow(1-r,3);t.textContent=Math.floor(o*N).toString(),r<1?requestAnimationFrame(s):t.textContent=o.toString()}requestAnimationFrame(s)})}async function w(){try{const e=await v();if(e){const t=document.getElementById("hero-temp"),o=document.getElementById("hero-weather-icon");t&&(t.textContent=`${e.temperature}°C`),o&&(o.className=`fas ${e.icon}`,e.icon.includes("sun")?o.style.color="#fbbf24":e.icon.includes("cloud")?o.style.color="#94a3b8":e.icon.includes("rain")||e.icon.includes("bolt")?o.style.color="#60a5fa":e.icon.includes("moon")?o.style.color="#a78bfa":o.style.color="#fbbf24");const a=document.getElementById("location-badge");a&&a.setAttribute("data-tooltip",`${e.description} · Feels like ${e.feelsLike}°C · ${e.humidity}% humidity`);const n=document.getElementById("header-temp"),s=document.getElementById("weather-icon"),i=document.querySelector(".weather-btn");n&&s&&i&&(n.textContent=`${e.temperature}°`,s.className=`fas ${e.icon} theme-icon`,i.classList.add("has-weather"))}}catch{console.log("Weather API unavailable")}}function D(){const e=document.getElementById("header-time");if(e){const t=E();t&&(e.textContent=t)}}setTimeout(p,1500);setTimeout(I,1200);w();D();setInterval(D,6e4);setInterval(w,900*1e3);
