---
// Header component - Desktop top header + Mobile bottom navigation
// Modern tab bar navigation for mobile
---

<!-- DESKTOP HEADER (hidden on mobile) -->
<header class="header header-cosmic header-desktop" data-header>
    <!-- Brand Logo with Constellation Effect -->
    <div class="nav-brand cosmic-brand">
        <div class="brand-icon constellation-icon">
            <svg class="constellation-svg" viewBox="0 0 40 40" fill="none">
                <defs>
                    <!-- Neural Mindscape gradient: cyan → purple → primary -->
                    <linearGradient id="cosmicGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:var(--neural-cyan, #00ffff)" />
                        <stop offset="50%" style="stop-color:var(--neural-purple, #aa44ff)" />
                        <stop offset="100%" style="stop-color:var(--neural-primary, #64B5F6)" />
                    </linearGradient>
                    <filter id="starGlow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="1" result="blur"/>
                        <feMerge>
                            <feMergeNode in="blur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                <circle class="star-node" cx="20" cy="8" r="2.5" fill="url(#cosmicGradient)" filter="url(#starGlow)" />
                <circle class="star-node" cx="8" cy="20" r="2" fill="url(#cosmicGradient)" filter="url(#starGlow)" />
                <circle class="star-node" cx="32" cy="20" r="2" fill="url(#cosmicGradient)" filter="url(#starGlow)" />
                <circle class="star-node" cx="14" cy="32" r="1.5" fill="url(#cosmicGradient)" filter="url(#starGlow)" />
                <circle class="star-node" cx="26" cy="32" r="1.5" fill="url(#cosmicGradient)" filter="url(#starGlow)" />
                <line class="constellation-line" x1="20" y1="8" x2="8" y2="20" stroke="url(#cosmicGradient)" stroke-width="0.5" opacity="0.6" />
                <line class="constellation-line" x1="20" y1="8" x2="32" y2="20" stroke="url(#cosmicGradient)" stroke-width="0.5" opacity="0.6" />
                <line class="constellation-line" x1="8" y1="20" x2="14" y2="32" stroke="url(#cosmicGradient)" stroke-width="0.5" opacity="0.6" />
                <line class="constellation-line" x1="32" y1="20" x2="26" y2="32" stroke="url(#cosmicGradient)" stroke-width="0.5" opacity="0.6" />
                <line class="constellation-line" x1="14" y1="32" x2="26" y2="32" stroke="url(#cosmicGradient)" stroke-width="0.5" opacity="0.6" />
            </svg>
            <span class="brand-glow"></span>
        </div>
        <span class="brand-text">CO</span>
    </div>

    <!-- Desktop Navigation -->
    <nav class="nav-links cosmic-nav" data-nav-links>
        <a href="#hero" class="nav-link cosmic-link" data-nav-link>
            <span class="link-glow"></span>
            <i class="fas fa-home nav-icon"></i>
            <span class="link-text">Home</span>
        </a>
        <a href="#experience" class="nav-link cosmic-link" data-nav-link>
            <span class="link-glow"></span>
            <i class="fas fa-briefcase nav-icon"></i>
            <span class="link-text">Experience</span>
        </a>
        <a href="#tech" class="nav-link cosmic-link" data-nav-link>
            <span class="link-glow"></span>
            <i class="fas fa-code nav-icon"></i>
            <span class="link-text">Tech & Projects</span>
        </a>
        <a href="#contact" class="nav-link cosmic-link" data-nav-link>
            <span class="link-glow"></span>
            <i class="fas fa-envelope nav-icon"></i>
            <span class="link-text">Contact</span>
        </a>
    </nav>

    <!-- Desktop Controls -->
    <div class="nav-controls cosmic-controls">
        <button class="theme-toggle cosmic-btn weather-btn" id="theme-toggle" aria-label="Change theme" data-theme-toggle>
            <span class="btn-orbit"></span>
            <i class="fas fa-sun theme-icon" id="weather-icon"></i>
            <span class="weather-temp" id="header-temp"></span>
        </button>

        <div class="time-display cosmic-btn" id="time-display" aria-label="Local time">
            <i class="fas fa-clock time-icon"></i>
            <span class="time-text" id="header-time">--:--</span>
        </div>

        <button class="language-toggle cosmic-btn" id="language-toggle" aria-label="Change language">
            <span class="btn-orbit"></span>
            <i class="fas fa-globe"></i>
        </button>
    </div>

    <!-- Progress Bar -->
    <div class="header-progress cosmic-progress" data-header-progress></div>
</header>

<!-- MOBILE BOTTOM NAVIGATION (hidden on desktop) -->
<nav class="mobile-bottom-nav" data-mobile-nav>
    <div class="mobile-nav-glow"></div>

    <a href="#hero" class="mobile-nav-item active" data-nav-section="hero">
        <div class="nav-item-indicator"></div>
        <i class="fas fa-home"></i>
        <span>Home</span>
    </a>

    <a href="#experience" class="mobile-nav-item" data-nav-section="experience">
        <div class="nav-item-indicator"></div>
        <i class="fas fa-briefcase"></i>
        <span>Work</span>
    </a>

    <a href="#tech" class="mobile-nav-item" data-nav-section="tech">
        <div class="nav-item-indicator"></div>
        <i class="fas fa-code"></i>
        <span>Tech</span>
    </a>

    <a href="#contact" class="mobile-nav-item" data-nav-section="contact">
        <div class="nav-item-indicator"></div>
        <i class="fas fa-envelope"></i>
        <span>Contact</span>
    </a>

    <button class="mobile-nav-item mobile-theme-btn" id="mobile-theme-toggle" aria-label="Toggle theme">
        <div class="nav-item-indicator"></div>
        <i class="fas fa-moon"></i>
        <span>Theme</span>
    </button>
</nav>

<script>
// Mobile bottom navigation active state management
document.addEventListener('DOMContentLoaded', () => {
    const mobileNav = document.querySelector('[data-mobile-nav]');
    const mobileNavItems = document.querySelectorAll('.mobile-nav-item[data-nav-section]');
    const mobileThemeBtn = document.getElementById('mobile-theme-toggle');
    const desktopThemeBtn = document.getElementById('theme-toggle');

    // Update active state based on scroll position
    const sections = ['hero', 'experience', 'tech', 'contact'];

    const updateActiveNav = () => {
        let currentSection = 'hero';
        const scrollY = window.scrollY + window.innerHeight / 3;

        sections.forEach(sectionId => {
            const section = document.getElementById(sectionId);
            if (section && section.offsetTop <= scrollY) {
                currentSection = sectionId;
            }
        });

        mobileNavItems.forEach(item => {
            const isActive = item.dataset.navSection === currentSection;
            item.classList.toggle('active', isActive);
        });
    };

    // Throttled scroll handler
    let ticking = false;
    window.addEventListener('scroll', () => {
        if (!ticking) {
            requestAnimationFrame(() => {
                updateActiveNav();
                ticking = false;
            });
            ticking = true;
        }
    });

    // Sync mobile theme toggle with desktop
    if (mobileThemeBtn && desktopThemeBtn) {
        mobileThemeBtn.addEventListener('click', () => {
            desktopThemeBtn.click();
            // Update icon
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const icon = mobileThemeBtn.querySelector('i');
            icon.className = currentTheme === 'light' ? 'fas fa-sun' : 'fas fa-moon';
        });
    }

    // Smooth scroll for mobile nav
    mobileNavItems.forEach(item => {
        item.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = item.getAttribute('href')?.substring(1);
            const target = document.getElementById(targetId);
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    });

    // Initial state
    updateActiveNav();
});
</script>
