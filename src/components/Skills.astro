---
// Skills section - Dise√±o Bento Grid Premium con Three.js
---

<section id="skills" class="skills section section-bg">
    <!-- Three.js Background Container -->
    <div id="skills-three-container" class="skills-three-container"></div>

    <div class="container">
        <!-- Header -->
        <div class="section-header">
            <div class="section-badge skill-animate" data-anim-delay="0">
                <i class="fas fa-layer-group"></i>
                <span>Tech Stack</span>
            </div>
            <h2 class="section-title skill-animate" data-anim-delay="100">
                <span class="title-gradient">What I Work With</span>
            </h2>
        </div>

        <!-- Bento Grid Premium -->
        <div class="bento-grid">
            <!-- Main Card - Backend (Featured) -->
            <div class="bento-card bento-featured skill-animate" data-anim-delay="300">
                <div class="card-content">
                    <div class="card-header">
                        <div class="card-icon backend">
                            <i class="fas fa-server"></i>
                        </div>
                        <div class="card-info">
                            <span class="card-label">Primary Focus</span>
                            <h3>Backend Development</h3>
                        </div>
                    </div>

                    <div class="skill-pills">
                        <div class="pill pill-primary"><i class="fab fa-java"></i><span>Java 17+</span></div>
                        <div class="pill pill-primary"><i class="fas fa-leaf"></i><span>Spring Boot</span></div>
                        <div class="pill pill-primary"><i class="fas fa-rocket"></i><span>Quarkus</span></div>
                        <div class="pill"><i class="fas fa-cubes"></i><span>Microservices</span></div>
                        <div class="pill"><i class="fas fa-exchange-alt"></i><span>REST APIs</span></div>
                        <div class="pill"><i class="fas fa-bolt"></i><span>GraphQL</span></div>
                        <div class="pill"><i class="fas fa-stream"></i><span>Kafka</span></div>
                        <div class="pill"><i class="fas fa-shield-alt"></i><span>OAuth 2.0</span></div>
                    </div>
                </div>
            </div>

            <!-- DevOps Card -->
            <div class="bento-card bento-medium skill-animate" data-anim-delay="400">
                <div class="card-content">
                    <div class="card-header compact">
                        <div class="card-icon devops"><i class="fas fa-cloud"></i></div>
                        <h3>DevOps & Cloud</h3>
                    </div>
                    <div class="skill-pills compact">
                        <div class="pill pill-cyan"><i class="fab fa-docker"></i><span>Docker</span></div>
                        <div class="pill pill-cyan"><i class="fas fa-dharmachakra"></i><span>Kubernetes</span></div>
                        <div class="pill"><i class="fab fa-aws"></i><span>AWS</span></div>
                        <div class="pill"><i class="fab fa-jenkins"></i><span>Jenkins</span></div>
                        <div class="pill"><i class="fab fa-github"></i><span>GitHub Actions</span></div>
                    </div>
                </div>
            </div>

            <!-- Database Card -->
            <div class="bento-card bento-medium skill-animate" data-anim-delay="500">
                <div class="card-content">
                    <div class="card-header compact">
                        <div class="card-icon database"><i class="fas fa-database"></i></div>
                        <h3>Database</h3>
                    </div>
                    <div class="skill-pills compact">
                        <div class="pill pill-purple"><i class="fas fa-elephant"></i><span>PostgreSQL</span></div>
                        <div class="pill pill-purple"><i class="fas fa-database"></i><span>MySQL</span></div>
                        <div class="pill"><i class="fas fa-leaf"></i><span>MongoDB</span></div>
                        <div class="pill"><i class="fas fa-bolt"></i><span>Redis</span></div>
                        <div class="pill"><i class="fas fa-project-diagram"></i><span>Hibernate</span></div>
                    </div>
                </div>
            </div>

            <!-- Frontend Card (Small) -->
            <div class="bento-card bento-small skill-animate" data-anim-delay="600">
                <div class="card-content">
                    <div class="card-header mini">
                        <div class="card-icon frontend"><i class="fas fa-palette"></i></div>
                        <h3>Frontend</h3>
                    </div>
                    <div class="skill-pills mini">
                        <div class="pill pill-orange"><i class="fab fa-angular"></i><span>Angular</span></div>
                        <div class="pill"><i class="fab fa-js"></i><span>TypeScript</span></div>
                        <div class="pill"><i class="fab fa-html5"></i><span>HTML/CSS</span></div>
                    </div>
                </div>
            </div>

            <!-- Tools Card (Small) -->
            <div class="bento-card bento-small skill-animate" data-anim-delay="700">
                <div class="card-content">
                    <div class="card-header mini">
                        <div class="card-icon tools"><i class="fas fa-wrench"></i></div>
                        <h3>Tools</h3>
                    </div>
                    <div class="skill-pills mini">
                        <div class="pill pill-green"><i class="fab fa-git-alt"></i><span>Git</span></div>
                        <div class="pill"><i class="fas fa-vial"></i><span>JUnit</span></div>
                        <div class="pill"><i class="fas fa-box"></i><span>Maven</span></div>
                    </div>
                </div>
            </div>

            <!-- Learning Card (Wide) -->
            <div class="bento-card bento-wide skill-animate" data-anim-delay="800">
                <div class="card-content">
                    <div class="card-header compact">
                        <div class="card-icon learning"><i class="fas fa-graduation-cap"></i></div>
                        <div class="card-info">
                            <span class="card-label pulse">Always Learning</span>
                            <h3>Currently Exploring</h3>
                        </div>
                    </div>
                    <div class="skill-pills">
                        <div class="pill pill-learning"><i class="fas fa-brain"></i><span>AI/ML</span></div>
                        <div class="pill pill-learning"><i class="fas fa-cube"></i><span>Rust</span></div>
                        <div class="pill pill-learning"><i class="fas fa-cloud"></i><span>Serverless</span></div>
                        <div class="pill pill-learning"><i class="fas fa-link"></i><span>Web3</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tech Logos Marquee -->
        <div class="tech-marquee skill-animate" data-anim-delay="900">
            <div class="marquee-track">
                <div class="marquee-item"><i class="fab fa-java"></i></div>
                <div class="marquee-item"><i class="fab fa-docker"></i></div>
                <div class="marquee-item"><i class="fab fa-angular"></i></div>
                <div class="marquee-item"><i class="fab fa-aws"></i></div>
                <div class="marquee-item"><i class="fab fa-git-alt"></i></div>
                <div class="marquee-item"><i class="fab fa-github"></i></div>
                <div class="marquee-item"><i class="fab fa-linux"></i></div>
                <div class="marquee-item"><i class="fab fa-java"></i></div>
                <div class="marquee-item"><i class="fab fa-docker"></i></div>
                <div class="marquee-item"><i class="fab fa-angular"></i></div>
                <div class="marquee-item"><i class="fab fa-aws"></i></div>
                <div class="marquee-item"><i class="fab fa-git-alt"></i></div>
            </div>
        </div>
    </div>
</section>

<style>
    .skills {
        position: relative;
        padding: 6rem 0;
        overflow: hidden;
    }

    /* Three.js Container */
    .skills-three-container {
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 0;
    }

    .skills-three-container canvas {
        position: absolute !important;
        inset: 0;
    }

    /* Section Header */
    .section-header {
        text-align: center;
        margin-bottom: 4rem;
        position: relative;
        z-index: 1;
    }

    .section-title {
        font-size: clamp(2rem, 5vw, 3rem);
        font-weight: 800;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.25rem;
    }

    .title-gradient {
        background: linear-gradient(135deg, #fff 0%, var(--primary-color) 50%, var(--accent-color) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .section-subtitle {
        font-size: 1.1rem;
        color: var(--text-secondary);
        max-width: 500px;
        margin: 0 auto;
    }

    /* Bento Grid */
    .bento-grid {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        grid-auto-rows: minmax(140px, auto);
        gap: 1.25rem;
        max-width: 1100px;
        margin: 0 auto;
        position: relative;
        z-index: 1;
    }

    .bento-featured { grid-column: span 7; grid-row: span 2; }
    .bento-medium { grid-column: span 5; }
    .bento-small { grid-column: span 6; }
    .bento-wide { grid-column: span 12; }

    /* Card Base */
    .bento-card {
        position: relative;
        background: var(--card-bg-glass);
        border: var(--card-border);
        border-radius: var(--card-radius);
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: var(--card-backdrop);
    }

    .bento-card:hover {
        transform: translateY(-5px);
        border: var(--card-border-hover);
        box-shadow: var(--card-shadow-hover);
    }

    .card-content {
        position: relative;
        padding: var(--card-padding);
        height: 100%;
        display: flex;
        flex-direction: column;
        z-index: 1;
    }

    /* Card Header */
    .card-header {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        margin-bottom: 1.25rem;
    }

    .card-header.compact { margin-bottom: 1rem; }
    .card-header.mini { margin-bottom: 0.75rem; gap: 0.75rem; }

    .card-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, rgba(100, 181, 246, 0.2), rgba(100, 181, 246, 0.05));
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        color: var(--primary-color);
        flex-shrink: 0;
        transition: all 0.3s ease;
    }

    .bento-card:hover .card-icon {
        transform: scale(1.1);
    }

    .card-icon.devops {
        background: linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(0, 255, 255, 0.05));
        color: #00ffff;
    }

    .card-icon.database {
        background: linear-gradient(135deg, rgba(170, 68, 255, 0.2), rgba(170, 68, 255, 0.05));
        color: #aa44ff;
    }

    .card-icon.frontend {
        background: linear-gradient(135deg, rgba(255, 107, 53, 0.2), rgba(255, 107, 53, 0.05));
        color: var(--accent-color);
    }

    .card-icon.tools {
        background: linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(74, 222, 128, 0.05));
        color: #4ade80;
    }

    .card-icon.learning {
        background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(251, 191, 36, 0.05));
        color: #fbbf24;
    }

    .card-info { flex: 1; }

    .card-label {
        display: block;
        font-size: 0.7rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 0.25rem;
    }

    .card-label.pulse {
        color: #fbbf24;
        animation: labelPulse 2s ease-in-out infinite;
    }

    @keyframes labelPulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

    .card-header h3 {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
    }

    .card-header.mini h3 { font-size: 1rem; }

    /* Skill Pills */
    .skill-pills {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        flex: 1;
    }

    .skill-pills.compact { gap: 0.4rem; }
    .skill-pills.mini { gap: 0.35rem; }

    .pill {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.4rem 0.8rem;
        background: rgba(100, 181, 246, 0.06);
        border: 1px solid rgba(100, 181, 246, 0.12);
        border-radius: 50px;
        font-size: 0.8rem;
        color: var(--text-secondary);
        transition: all 0.3s ease;
        /* Stagger animation initial state */
        opacity: 0;
        transform: translateY(10px) scale(0.9);
    }

    /* Stagger animation when card becomes visible */
    .bento-card.visible .pill {
        animation: pillReveal 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }

    /* Stagger delays for each pill */
    .bento-card.visible .pill:nth-child(1) { animation-delay: 0.05s; }
    .bento-card.visible .pill:nth-child(2) { animation-delay: 0.1s; }
    .bento-card.visible .pill:nth-child(3) { animation-delay: 0.15s; }
    .bento-card.visible .pill:nth-child(4) { animation-delay: 0.2s; }
    .bento-card.visible .pill:nth-child(5) { animation-delay: 0.25s; }
    .bento-card.visible .pill:nth-child(6) { animation-delay: 0.3s; }
    .bento-card.visible .pill:nth-child(7) { animation-delay: 0.35s; }
    .bento-card.visible .pill:nth-child(8) { animation-delay: 0.4s; }

    @keyframes pillReveal {
        0% {
            opacity: 0;
            transform: translateY(10px) scale(0.9);
        }
        100% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    .pill i {
        font-size: 0.75rem;
        color: var(--primary-color);
    }

    .pill:hover {
        background: rgba(100, 181, 246, 0.15);
        border-color: rgba(100, 181, 246, 0.4);
        color: var(--text-primary);
        transform: translateY(-2px);
    }

    .pill-primary {
        background: rgba(100, 181, 246, 0.12);
        border-color: rgba(100, 181, 246, 0.25);
        color: var(--text-primary);
    }

    .pill-cyan { background: rgba(0, 255, 255, 0.08); border-color: rgba(0, 255, 255, 0.2); }
    .pill-cyan i { color: #00ffff; }

    .pill-purple { background: rgba(170, 68, 255, 0.08); border-color: rgba(170, 68, 255, 0.2); }
    .pill-purple i { color: #aa44ff; }

    .pill-orange { background: rgba(255, 107, 53, 0.08); border-color: rgba(255, 107, 53, 0.2); }
    .pill-orange i { color: var(--accent-color); }

    .pill-green { background: rgba(74, 222, 128, 0.08); border-color: rgba(74, 222, 128, 0.2); }
    .pill-green i { color: #4ade80; }

    .pill-learning { background: rgba(251, 191, 36, 0.08); border-color: rgba(251, 191, 36, 0.2); }
    .pill-learning i { color: #fbbf24; }

    /* Tech Marquee */
    .tech-marquee {
        margin-top: 4rem;
        overflow: hidden;
        mask-image: linear-gradient(90deg, transparent, black 10%, black 90%, transparent);
        -webkit-mask-image: linear-gradient(90deg, transparent, black 10%, black 90%, transparent);
        position: relative;
        z-index: 1;
    }

    .marquee-track {
        display: flex;
        gap: 3rem;
        animation: marquee 25s linear infinite;
        width: fit-content;
    }

    .marquee-item {
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(100, 181, 246, 0.05);
        border: 1px solid rgba(100, 181, 246, 0.1);
        border-radius: 12px;
        font-size: 1.5rem;
        color: var(--primary-color);
        opacity: 0.5;
        transition: all 0.3s ease;
        flex-shrink: 0;
    }

    .marquee-item:hover {
        opacity: 1;
        transform: scale(1.1);
    }

    @keyframes marquee {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }

    /* Animation Classes */
    .skill-animate {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .skill-animate.visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* Responsive */
    @media (max-width: 1024px) {
        .bento-grid { grid-template-columns: repeat(6, 1fr); }
        .bento-featured { grid-column: span 6; grid-row: span 1; }
        .bento-medium { grid-column: span 3; }
        .bento-small { grid-column: span 3; }
        .bento-wide { grid-column: span 6; }
    }

    @media (max-width: 768px) {
        .skills { padding: 4rem 0; }
        .bento-grid { grid-template-columns: 1fr; gap: 1rem; }
        .bento-featured, .bento-medium, .bento-small, .bento-wide {
            grid-column: span 1;
            grid-row: span 1;
        }
        .card-content { padding: 1.25rem; }
        .card-icon { width: 44px; height: 44px; font-size: 1.1rem; }
        .card-header h3 { font-size: 1.05rem; }
        .pill { padding: 0.35rem 0.65rem; font-size: 0.75rem; }
        .marquee-item { width: 44px; height: 44px; font-size: 1.25rem; }
        .bento-card:hover { transform: translateY(-3px); }
    }

    @media (max-width: 480px) {
        .card-content { padding: 1rem; }
        .card-header { flex-wrap: wrap; gap: 0.75rem; }
        .card-icon { width: 40px; height: 40px; font-size: 1rem; border-radius: 10px; }
        .pill { padding: 0.3rem 0.5rem; font-size: 0.7rem; }
        .pill i { font-size: 0.65rem; }
        .tech-marquee { margin-top: 2.5rem; }
    }

    @media (hover: none) and (pointer: coarse) {
        .bento-card:active { transform: scale(0.98); }
        .pill:active { transform: scale(0.95); background: rgba(100, 181, 246, 0.2); }
    }

    @media (hover: hover) {
        .tech-marquee:hover .marquee-track { animation-play-state: paused; }
    }

    @media (prefers-reduced-motion: reduce) {
        .marquee-track { animation: none; }
        .skill-animate { transition: opacity 0.3s ease; transform: none; }
        .pill {
            opacity: 1;
            transform: none;
            animation: none !important;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const delay = parseInt(entry.target.getAttribute('data-anim-delay') || '0');
                    setTimeout(() => {
                        entry.target.classList.add('visible');
                        // Also trigger pill stagger animation
                        if (entry.target.classList.contains('bento-card')) {
                            entry.target.classList.add('visible');
                        }
                    }, delay);
                }
            });
        }, observerOptions);

        // Observe skill-animate elements (includes bento-cards)
        document.querySelectorAll('.skill-animate').forEach(el => observer.observe(el));

        // 3D Tilt Effect for cards
        if (window.matchMedia('(hover: hover)').matches) {
            const cards = document.querySelectorAll('.bento-card') as NodeListOf<HTMLElement>;
            cards.forEach(card => {
                card.addEventListener('mousemove', (e: MouseEvent) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = (y - centerY) / 30;
                    const rotateY = (centerX - x) / 30;
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-5px)`;
                });
                card.addEventListener('mouseleave', () => { card.style.transform = ''; });
            });
        }
    });
</script>
