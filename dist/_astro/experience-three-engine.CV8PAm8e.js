import{i as m,S as p,P as u,W as f,B as l,b as c,j as w,A as g,d as M,V as y,L as b,g as x,k as P,M as v,f as E,l as d}from"./three.module.R4v5x26M.js";class A{constructor(t){this.container=document.getElementById(t),this.container&&(this.scene=null,this.camera=null,this.renderer=null,this.particles=null,this.dataStreams=[],this.hologramRings=[],this.time=0,this.isVisible=!1,this.mouse=new m,this.isMobile=window.innerWidth<=768,this.isLowPower=window.innerWidth<=480,this.particleMultiplier=this.isLowPower?.3:this.isMobile?.5:1,this.init())}init(){this.scene=new p;const t=this.container.clientWidth/this.container.clientHeight;this.camera=new u(75,t,.1,1e3),this.camera.position.z=30,this.renderer=new f({antialias:!this.isMobile,alpha:!0,powerPreference:this.isMobile?"low-power":"default"}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,this.isMobile?1.5:2)),this.container.appendChild(this.renderer.domElement),this.createRisingParticles(),this.createDataStreams(),this.createHologramRings(),this.createGridFloor(),window.addEventListener("resize",()=>this.onResize()),window.addEventListener("mousemove",e=>this.onMouseMove(e)),this.setupIntersectionObserver(),this.animate()}createRisingParticles(){const t=Math.floor(200*this.particleMultiplier),e=new l,i=new Float32Array(t*3),r=new Float32Array(t),a=new Float32Array(t*3);for(let s=0;s<t;s++){i[s*3]=(Math.random()-.5)*60,i[s*3+1]=Math.random()*80-40,i[s*3+2]=(Math.random()-.5)*30,r[s]=.02+Math.random()*.05;const o=Math.random();a[s*3]=o*.5,a[s*3+1]=1-o*.3,a[s*3+2]=1}e.setAttribute("position",new c(i,3)),e.setAttribute("velocity",new c(r,1)),e.setAttribute("color",new c(a,3));const n=new w({size:1.5,vertexColors:!0,transparent:!0,opacity:.6,blending:g});this.particles=new M(e,n),this.scene.add(this.particles)}createDataStreams(){for(let e=0;e<8;e++){const i=new l,r=[],a=20,n=(e-8/2)*8;for(let h=0;h<a;h++)r.push(new y(n+(Math.random()-.5)*2,h*3-30,(Math.random()-.5)*10));i.setFromPoints(r);const s=new b({color:e%2===0?65535:16711935,transparent:!0,opacity:.2}),o=new x(i,s);o.userData={originalPoints:r.map(h=>h.clone()),phase:Math.random()*Math.PI*2,speed:.5+Math.random()*.5},this.scene.add(o),this.dataStreams.push(o)}}createHologramRings(){[-20,-5,10,25].forEach((e,i)=>{const r=new P(15+i*3,.1,8,64),a=new v({color:i%2===0?65535:16711935,transparent:!0,opacity:.15,wireframe:!0}),n=new E(r,a);n.position.y=e,n.rotation.x=Math.PI/2,n.userData={rotationSpeed:.002*(i%2===0?1:-1),pulsePhase:i*.5},this.scene.add(n),this.hologramRings.push(n)})}createGridFloor(){const t=new d(100,50,65535,65535);t.position.y=-35,t.material.transparent=!0,t.material.opacity=.1,this.scene.add(t);const e=new d(100,25,16711935,16711935);e.position.y=-35,e.material.transparent=!0,e.material.opacity=.05,this.scene.add(e)}setupIntersectionObserver(){const t=new IntersectionObserver(i=>{i.forEach(r=>{this.isVisible=r.isIntersecting})},{threshold:.1}),e=document.getElementById("experience");e&&t.observe(e)}onMouseMove(t){this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=-(t.clientY/window.innerHeight)*2+1}onResize(){if(!this.container)return;const t=this.container.clientWidth,e=this.container.clientHeight;this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)}animate(){if(requestAnimationFrame(()=>this.animate()),!!this.isVisible){if(this.time+=.01,this.particles){const t=this.particles.geometry.attributes.position.array,e=this.particles.geometry.attributes.velocity.array;for(let i=0;i<t.length/3;i++)t[i*3+1]+=e[i],t[i*3+1]>40&&(t[i*3+1]=-40,t[i*3]=(Math.random()-.5)*60),t[i*3]+=Math.sin(this.time+i)*.01;this.particles.geometry.attributes.position.needsUpdate=!0}this.dataStreams.forEach((t,e)=>{const i=t.geometry.attributes.position.array,{originalPoints:r,phase:a,speed:n}=t.userData;for(let s=0;s<r.length;s++){const o=s*3;i[o]=r[s].x+Math.sin(this.time*n+s*.5+a)*2,i[o+2]=r[s].z+Math.cos(this.time*n+s*.3+a)*1}t.geometry.attributes.position.needsUpdate=!0,t.material.opacity=.1+Math.sin(this.time+e)*.1}),this.hologramRings.forEach((t,e)=>{t.rotation.z+=t.userData.rotationSpeed;const i=1+Math.sin(this.time*2+t.userData.pulsePhase)*.1;t.scale.setScalar(i),t.material.opacity=.1+Math.sin(this.time+e)*.08}),this.camera.position.x+=(this.mouse.x*3-this.camera.position.x)*.02,this.camera.position.y+=(this.mouse.y*2-this.camera.position.y)*.02,this.camera.lookAt(0,0,0),this.renderer.render(this.scene,this.camera)}}dispose(){this.renderer&&(this.renderer.dispose(),this.container.removeChild(this.renderer.domElement))}}export{A as ExperienceThreeEngine};
