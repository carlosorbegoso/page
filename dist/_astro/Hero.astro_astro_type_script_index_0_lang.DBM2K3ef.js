const g="America/Lima";let d=null,m=0;const b=900*1e3,p={0:{description:"Clear sky",icon:"fa-sun",isDay:"fa-sun",isNight:"fa-moon"},1:{description:"Mainly clear",icon:"fa-sun",isDay:"fa-sun",isNight:"fa-moon"},2:{description:"Partly cloudy",icon:"fa-cloud-sun",isDay:"fa-cloud-sun",isNight:"fa-cloud-moon"},3:{description:"Overcast",icon:"fa-cloud",isDay:"fa-cloud",isNight:"fa-cloud"},45:{description:"Foggy",icon:"fa-smog",isDay:"fa-smog",isNight:"fa-smog"},48:{description:"Depositing rime fog",icon:"fa-smog",isDay:"fa-smog",isNight:"fa-smog"},51:{description:"Light drizzle",icon:"fa-cloud-rain",isDay:"fa-cloud-rain",isNight:"fa-cloud-rain"},53:{description:"Moderate drizzle",icon:"fa-cloud-rain",isDay:"fa-cloud-rain",isNight:"fa-cloud-rain"},55:{description:"Dense drizzle",icon:"fa-cloud-rain",isDay:"fa-cloud-rain",isNight:"fa-cloud-rain"},61:{description:"Slight rain",icon:"fa-cloud-rain",isDay:"fa-cloud-rain",isNight:"fa-cloud-rain"},63:{description:"Moderate rain",icon:"fa-cloud-showers-heavy",isDay:"fa-cloud-showers-heavy",isNight:"fa-cloud-showers-heavy"},65:{description:"Heavy rain",icon:"fa-cloud-showers-heavy",isDay:"fa-cloud-showers-heavy",isNight:"fa-cloud-showers-heavy"},71:{description:"Slight snow",icon:"fa-snowflake",isDay:"fa-snowflake",isNight:"fa-snowflake"},73:{description:"Moderate snow",icon:"fa-snowflake",isDay:"fa-snowflake",isNight:"fa-snowflake"},75:{description:"Heavy snow",icon:"fa-snowflake",isDay:"fa-snowflake",isNight:"fa-snowflake"},80:{description:"Slight showers",icon:"fa-cloud-rain",isDay:"fa-cloud-sun-rain",isNight:"fa-cloud-moon-rain"},81:{description:"Moderate showers",icon:"fa-cloud-showers-heavy",isDay:"fa-cloud-showers-heavy",isNight:"fa-cloud-showers-heavy"},82:{description:"Violent showers",icon:"fa-cloud-showers-heavy",isDay:"fa-cloud-showers-heavy",isNight:"fa-cloud-showers-heavy"},95:{description:"Thunderstorm",icon:"fa-bolt",isDay:"fa-bolt",isNight:"fa-bolt"},96:{description:"Thunderstorm with hail",icon:"fa-bolt",isDay:"fa-bolt",isNight:"fa-bolt"},99:{description:"Thunderstorm with heavy hail",icon:"fa-bolt",isDay:"fa-bolt",isNight:"fa-bolt"}};async function E(e=-12.0464,t=-77.0428,o=g){if(d&&Date.now()-m<b)return d;try{const a=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,is_day&timezone=${encodeURIComponent(o)}`,s=await fetch(a);if(s.ok){const n=(await s.json()).current,i=p[n.weather_code]||p[0];return d={temperature:Math.round(n.temperature_2m),feelsLike:Math.round(n.apparent_temperature),humidity:n.relative_humidity_2m,description:i.description,icon:n.is_day?i.isDay:i.isNight,isDay:n.is_day===1,timezone:o,timestamp:new Date().toISOString()},m=Date.now(),d}}catch{console.log("Open-Meteo API unavailable")}return null}function v(e=g){try{const t=new Date,o={timeZone:e,hour:"2-digit",minute:"2-digit",hour12:!0};return t.toLocaleTimeString("en-US",o)}catch{return null}}const y=["Backend Developer","Java Specialist","Microservices Expert","Cloud Architect"];let f=0,c=0,l=!1;const h=document.getElementById("typing-text");function w(){if(!h)return;const e=y[f];l?(h.textContent=e.substring(0,c-1),c--):(h.textContent=e.substring(0,c+1),c++);let t=l?50:100;!l&&c===e.length?(t=2e3,l=!0):l&&c===0&&(l=!1,f=(f+1)%y.length,t=500),setTimeout(w,t)}function T(){document.querySelectorAll(".stat-number[data-count]").forEach(t=>{const o=parseInt(t.getAttribute("data-count")||"0"),a=2e3,s=performance.now();function r(n){const i=Math.min((n-s)/a,1),u=1-Math.pow(1-i,3);t.textContent=Math.floor(o*u).toString(),i<1?requestAnimationFrame(r):t.textContent=o.toString()}requestAnimationFrame(r)})}async function D(){try{const e=await E();if(e){const t=document.getElementById("hero-temp"),o=document.getElementById("hero-weather-icon");t&&(t.textContent=`${e.temperature}°C`),o&&(o.className=`fas ${e.icon}`,e.icon.includes("sun")?o.style.color="#fbbf24":e.icon.includes("cloud")?o.style.color="#94a3b8":e.icon.includes("rain")||e.icon.includes("bolt")?o.style.color="#60a5fa":e.icon.includes("moon")?o.style.color="#a78bfa":o.style.color="#fbbf24");const a=document.getElementById("location-badge");a&&a.setAttribute("data-tooltip",`${e.description} · Feels like ${e.feelsLike}°C · ${e.humidity}% humidity`);const s=document.getElementById("header-temp"),r=document.getElementById("weather-icon"),n=document.querySelector(".weather-btn");s&&r&&n&&(s.textContent=`${e.temperature}°`,r.className=`fas ${e.icon} theme-icon`,n.classList.add("has-weather"))}}catch{console.log("Weather API unavailable")}}function N(){const e=document.getElementById("header-time");if(e){const t=v();t&&(e.textContent=t)}}setTimeout(w,1500);setTimeout(T,1200);D();N();setInterval(N,6e4);setInterval(D,900*1e3);function I(e){const t=e.currentTarget;if(!t)return;t.querySelectorAll(".ripple").forEach(u=>u.remove());const a=t.getBoundingClientRect(),s=Math.max(a.width,a.height),r=e.clientX-a.left-s/2,n=e.clientY-a.top-s/2,i=document.createElement("span");i.classList.add("ripple"),i.style.width=i.style.height=`${s}px`,i.style.left=`${r}px`,i.style.top=`${n}px`,t.appendChild(i),setTimeout(()=>i.remove(),600)}document.querySelectorAll(".btn").forEach(e=>{e.addEventListener("click",I)});
