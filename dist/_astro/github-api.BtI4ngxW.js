const p="https://api.github.com",d="carlosorbegoso",h=new Map,w=300*1e3;async function g(e){const t=h.get(e);if(t&&Date.now()-t.timestamp<w)return t.data;try{const s=await fetch(e,{headers:{Accept:"application/vnd.github.v3+json"}});if(!s.ok)throw new Error(`GitHub API error: ${s.status}`);const o=await s.json();return h.set(e,{data:o,timestamp:Date.now()}),o}catch(s){throw console.error("GitHub API fetch error:",s),s}}async function k(){const e=`${p}/users/${d}`;return g(e)}async function b(e={}){const{sort:t="updated",per_page:s=100}=e,o=`${p}/users/${d}/repos?sort=${t}&per_page=${s}`;return g(o)}async function y(e=30){const t=`${p}/users/${d}/events/public?per_page=${e}`;return g(t)}async function D(){const e=await b(),t={};e.forEach(r=>{r.language&&(t[r.language]=(t[r.language]||0)+1)});const s=Object.entries(t).sort(([,r],[,a])=>a-r).slice(0,6),o=s.reduce((r,[,a])=>r+a,0);return s.map(([r,a])=>({language:r,count:a,percentage:Math.round(a/o*100)}))}async function S(){return(await y(15)).filter(t=>["PushEvent","CreateEvent","PullRequestEvent","IssuesEvent","WatchEvent","ForkEvent"].includes(t.type)).slice(0,8).map(t=>{const s=t.repo.name.replace(`${d}/`,""),o=new Date(t.created_at),r=_(o);let a="",n="fas fa-code",i="";switch(t.type){case"PushEvent":const l=t.payload.commits?.length||0;a=`Pushed ${l} commit${l>1?"s":""}`,n="fas fa-code-commit",i=t.payload.commits?.[0]?.message?.split(`
`)[0]||"";break;case"CreateEvent":a=`Created ${t.payload.ref_type}`,n="fas fa-plus",i=t.payload.ref||"";break;case"PullRequestEvent":a=`${t.payload.action} PR`,n="fas fa-code-pull-request",i=t.payload.pull_request?.title||"";break;case"IssuesEvent":a=`${t.payload.action} issue`,n="fas fa-circle-dot",i=t.payload.issue?.title||"";break;case"WatchEvent":a="Starred",n="fas fa-star";break;case"ForkEvent":a="Forked",n="fas fa-code-fork";break}return{type:t.type,action:a,repo:s,repoUrl:`https://github.com/${t.repo.name}`,icon:n,details:i.substring(0,50)+(i.length>50?"...":""),timeAgo:r,date:o}})}function _(e){const t=Math.floor((new Date-e)/1e3),s=[{label:"year",seconds:31536e3},{label:"month",seconds:2592e3},{label:"week",seconds:604800},{label:"day",seconds:86400},{label:"hour",seconds:3600},{label:"minute",seconds:60}];for(const o of s){const r=Math.floor(t/o.seconds);if(r>=1)return`${r} ${o.label}${r>1?"s":""} ago`}return"Just now"}async function E(){const e=await y(100),t={};e.forEach(a=>{const n=new Date(a.created_at).toISOString().split("T")[0];t[n]=(t[n]||0)+1});let s=0;const o=new Date;for(let a=0;a<365;a++){const n=new Date(o);n.setDate(o.getDate()-a);const i=n.toISOString().split("T")[0];if(t[i])s++;else if(a>0)break}const r=[];for(let a=51;a>=0;a--){const n=[];for(let i=0;i<7;i++){const l=new Date(o);l.setDate(o.getDate()-(a*7+(6-i)));const m=l.toISOString().split("T")[0],u=t[m]||0;n.push({date:m,count:u,level:u===0?0:u<=2?1:u<=5?2:u<=10?3:4})}r.push(n)}return{currentStreak:s,totalContributions:Object.values(t).reduce((a,n)=>a+n,0),contributionData:r}}async function $(){try{const[e,t,s,o]=await Promise.all([k(),b(),S(),E()]),r=t.reduce((c,f)=>c+f.stargazers_count,0),a=t.reduce((c,f)=>c+f.forks_count,0),n=await D(),i=t.filter(c=>!c.fork).sort((c,f)=>f.stargazers_count-c.stargazers_count).slice(0,6),l=new Date(e.created_at),u=Math.floor((new Date-l)/(365.25*24*60*60*1e3));return{profile:{name:e.name||e.login,login:e.login,avatar:e.avatar_url,bio:e.bio,location:e.location,company:e.company,blog:e.blog,publicRepos:e.public_repos,followers:e.followers,following:e.following,createdAt:e.created_at,yearsOnGitHub:u},stats:{totalRepos:t.filter(c=>!c.fork).length,totalStars:r,totalForks:a,followers:e.followers,contributions:o.totalContributions,currentStreak:o.currentStreak},languages:n,featuredRepos:i.map(c=>({name:c.name,description:c.description,url:c.html_url,homepage:c.homepage,stars:c.stargazers_count,forks:c.forks_count,language:c.language,updatedAt:c.updated_at,topics:c.topics||[]})),activity:s,contributionData:o.contributionData}}catch(e){return console.error("Error fetching GitHub stats:",e),null}}async function A(e="page"){try{const t=`${p}/repos/${d}/${e}/commits?per_page=1`,s=await g(t);if(s&&s.length>0){const o=s[0];return{date:new Date(o.commit.committer.date),message:o.commit.message.split(`
`)[0],sha:o.sha.substring(0,7),author:o.commit.author.name}}return null}catch(t){return console.error("Error fetching last commit:",t),null}}const v={Java:"#b07219",JavaScript:"#f1e05a",TypeScript:"#3178c6",Python:"#3572A5",HTML:"#e34c26",CSS:"#563d7c",Go:"#00ADD8",Rust:"#dea584","C++":"#f34b7d","C#":"#178600",C:"#555555",PHP:"#4F5D95",Ruby:"#701516",Swift:"#ffac45",Kotlin:"#A97BFF",Shell:"#89e051",Dockerfile:"#384d54",Vue:"#41b883",SCSS:"#c6538c",Astro:"#ff5a03",Dart:"#00B4AB",Scala:"#c22d40",Elixir:"#6e4a7e",Haskell:"#5e5086",Lua:"#000080",Perl:"#0298c3",R:"#198CE7",MATLAB:"#e16737","Jupyter Notebook":"#DA5B0B",Makefile:"#427819",PowerShell:"#012456",Groovy:"#4298b8","Objective-C":"#438eff"};export{A as a,$ as g,v as l};
