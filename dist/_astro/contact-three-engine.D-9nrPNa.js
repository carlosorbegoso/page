import{c as f,f as w,g,W as y,S as p,a as h,M as l,R as M,D as P,L as x,B as m,b,d,P as z,A,e as E}from"./three.module.Bmjna7aR.js";class v{constructor(t){this.container=document.getElementById(t),this.container&&(this.scene=null,this.camera=null,this.renderer=null,this.particles=null,this.connections=[],this.nodes=[],this.flowingParticles=[],this.mouse=new f,this.time=0,this.isVisible=!1,this.init())}init(){this.scene=new w;const t=this.container.clientWidth/this.container.clientHeight;this.camera=new g(60,t,.1,1e3),this.camera.position.z=50,this.renderer=new y({antialias:!0,alpha:!0}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.container.appendChild(this.renderer.domElement),this.createNeuralNetwork(),this.createFlowingParticles(),this.createAmbientParticles(),window.addEventListener("resize",()=>this.onResize()),window.addEventListener("mousemove",e=>this.onMouseMove(e)),this.setupIntersectionObserver(),this.animate()}createNeuralNetwork(){const t=[{x:-25,y:15,z:0},{x:25,y:15,z:0},{x:0,y:-10,z:0},{x:-20,y:-20,z:5},{x:20,y:-20,z:5},{x:0,y:25,z:-5}],e=new p(.8,16,16),n=new h({color:65535,transparent:!0,opacity:.8});t.forEach((i,r)=>{const o=new l(e,n.clone());o.position.set(i.x,i.y,i.z),o.userData={originalPos:{...i},pulsePhase:Math.random()*Math.PI*2},this.scene.add(o),this.nodes.push(o);const s=new M(1.2,1.5,32),a=new h({color:65535,transparent:!0,opacity:.3,side:P}),c=new l(s,a);c.position.copy(o.position),c.userData={parent:o},this.scene.add(c)}),this.createConnections()}createConnections(){const t=new x({color:65535,transparent:!0,opacity:.15});[[0,1],[0,2],[1,2],[0,3],[1,4],[2,3],[2,4],[3,4],[0,5],[1,5],[5,2]].forEach(([n,i])=>{const r=new m,o=[this.nodes[n].position.clone(),this.nodes[i].position.clone()];r.setFromPoints(o);const s=new b(r,t.clone());s.userData={nodeA:n,nodeB:i},this.scene.add(s),this.connections.push(s)})}createFlowingParticles(){const t=new p(.15,8,8);this.connections.forEach((e,n)=>{for(let i=0;i<3;i++){const r=new h({color:n%2===0?65535:16711935,transparent:!0,opacity:.8}),o=new l(t,r);o.userData={connectionIndex:n,progress:Math.random(),speed:.002+Math.random()*.003,direction:Math.random()>.5?1:-1},this.scene.add(o),this.flowingParticles.push(o)}})}createAmbientParticles(){const e=new m,n=new Float32Array(450),i=new Float32Array(450),r=new Float32Array(150);for(let s=0;s<150;s++){n[s*3]=(Math.random()-.5)*100,n[s*3+1]=(Math.random()-.5)*80,n[s*3+2]=(Math.random()-.5)*50;const a=Math.random();i[s*3]=a<.5?0:1,i[s*3+1]=a<.5?1:0,i[s*3+2]=1,r[s]=Math.random()*2+.5}e.setAttribute("position",new d(n,3)),e.setAttribute("color",new d(i,3)),e.setAttribute("size",new d(r,1));const o=new z({size:.5,vertexColors:!0,transparent:!0,opacity:.4,blending:A});this.particles=new E(e,o),this.scene.add(this.particles)}setupIntersectionObserver(){const t=new IntersectionObserver(n=>{n.forEach(i=>{this.isVisible=i.isIntersecting})},{threshold:.1}),e=document.getElementById("contact");e&&t.observe(e)}onMouseMove(t){const e=this.container.getBoundingClientRect();this.mouse.x=(t.clientX-e.left)/e.width*2-1,this.mouse.y=-((t.clientY-e.top)/e.height)*2+1}onResize(){if(!this.container)return;const t=this.container.clientWidth,e=this.container.clientHeight;this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)}animate(){if(requestAnimationFrame(()=>this.animate()),!!this.isVisible){if(this.time+=.01,this.nodes.forEach((t,e)=>{const n=t.userData.pulsePhase,i=1+Math.sin(this.time*2+n)*.2;t.scale.setScalar(i),t.position.y=t.userData.originalPos.y+Math.sin(this.time+e)*.5}),this.flowingParticles.forEach(t=>{const e=t.userData,n=this.connections[e.connectionIndex];if(n){const i=this.nodes[n.userData.nodeA],r=this.nodes[n.userData.nodeB];e.progress+=e.speed*e.direction,e.progress>1?(e.progress=0,e.direction=1):e.progress<0&&(e.progress=1,e.direction=-1),t.position.lerpVectors(i.position,r.position,e.progress),t.material.opacity=.3+Math.sin(e.progress*Math.PI)*.7}}),this.connections.forEach((t,e)=>{t.material.opacity=.1+Math.sin(this.time+e*.5)*.1}),this.particles){const t=this.particles.geometry.attributes.position.array;for(let e=0;e<t.length;e+=3)t[e+1]+=Math.sin(this.time+t[e]*.1)*.02;this.particles.geometry.attributes.position.needsUpdate=!0,this.particles.rotation.y=this.time*.05}this.camera.position.x+=(this.mouse.x*5-this.camera.position.x)*.02,this.camera.position.y+=(this.mouse.y*3-this.camera.position.y)*.02,this.camera.lookAt(0,0,0),this.renderer.render(this.scene,this.camera)}}dispose(){this.renderer&&(this.renderer.dispose(),this.container.removeChild(this.renderer.domElement))}}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("contact-three-container")&&new v("contact-three-container")});export{v as ContactThreeEngine};
